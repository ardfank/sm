function epo(e){const a=new Date(e),t=new Intl.DateTimeFormat("id",{year:"numeric"}).format(a),n=new Intl.DateTimeFormat("id",{month:"short"}).format(a);return new Intl.DateTimeFormat("id",{day:"2-digit"}).format(a)+" "+n+" "+t}function cdt(e){var a=e.split("-");return new Date(a[0],a[1]-1,a[2])}function sex(e){return"Perempuan"==e?"&#128105;":"Laki-Laki"==e?"&#128104;":""}function alm(e){return"-"==e?"":e+", "}function rms(e){return e.substring(e.indexOf("-")+1)}function rm(e){return"odp"==e?"ODP - Selesai Pengawasan":"odp1"==e?"ODP - Proses Pengawasan":"pdp"==e?"PDP - Sehat":"pdp1"==e?"PDP - Dirawat PDP":"pdp2"==e?"PDP - PDP Meninggal":"pos"==e?"Positif - Dirawat Pasien Positif":"pos1"==e?"Positif - Meninggal":"Positif - Sembuh"}$(document).ready(function(){$("#anu").show();var e=[];$.ajax({url:"https://cdn.software-mirrors.com/covid/kab.json",jsonpCallback:"kab",dataType:"jsonp",success:function(a){e.push(a),$.each(a,function(e,a){var t="<option value='"+e+"'>"+e+"</option>";$("#kabss").append(t)})}}).done(function(){t("Total"),$("#kabss").val("Total"),$("#kabss").change(function(){t($(this).val())})});var a=new CanvasJS.Chart("chart",{axisX:{valueFormatString:"DD-MMM",crosshair:{enabled:!0}},axisY:[{title:"Positif",labelFontSize:12,gridDashType:"longDashDotDot"},{title:"PDP",labelFontSize:12}],axisY2:{title:"ODP",labelFontSize:12},toolTip:{shared:!0},legend:{cursor:"pointer",itemclick:function(e){void 0===e.dataSeries.visible||e.dataSeries.visible?e.dataSeries.visible=!1:e.dataSeries.visible=!0,e.chart.render()},fontSize:14,verticalAlign:"top"},data:[{type:"spline",name:"Positif - Dirawat",showInLegend:!0,xValueType:"dateTime",lineThickness:3,dataPoints:[]},{type:"spline",name:"Positif - Sembuh",showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"Positif - Meninggal",showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Dirawat",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Sehat",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Meninggal",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"ODP - Proses",showInLegend:!0,lineThickness:3,axisYType:"secondary",xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"ODP - Selesai",showInLegend:!0,lineThickness:3,axisYType:"secondary",xValueType:"dateTime",dataPoints:[]}]});function t(t){var n=[],i=[],s=[],o=[],d=[],p=[],r=[],l=[];$.each(e[0][t],function(e,a){n.push({x:cdt(e),y:a.sodp}),i.push({x:cdt(e),y:a.podp}),s.push({x:cdt(e),y:a.spdp}),o.push({x:cdt(e),y:a.dpdp}),d.push({x:cdt(e),y:a.mpdp}),p.push({x:cdt(e),y:a.spos}),r.push({x:cdt(e),y:a.mpos}),l.push({x:cdt(e),y:a.ppos})}),a.options.data[7].dataPoints=n,a.options.data[6].dataPoints=i,a.options.data[4].dataPoints=s,a.options.data[3].dataPoints=o,a.options.data[5].dataPoints=d,a.options.data[1].dataPoints=p,a.options.data[2].dataPoints=r,a.options.data[0].dataPoints=l,a.render()}a.render();$.each(["odp","pdp","pos"],function(e,a){$.ajax({url:"https://cdn.software-mirrors.com/covid/"+a+".json",jsonpCallback:a,dataType:"jsonp",success:function(e){var t=e.filter(e=>e.status===rm(a)).length,n=e.filter(e=>e.status===rm(a+"1")).length,i=e.filter(e=>e.status===rm(a+"2")).length,s="odp"==a?"(Proses Pengawasan: "+n+" | Selesai Pengawasan: "+t+")":"pdp"==a?"(Dirawat: "+n+" | Sehat: "+t+" | Meninggal: "+i+")":"(Dirawat: "+t+" | Sembuh: "+i+" | Meninggal: "+n+")";$("#"+a+" h2").append(Object.keys(e).length+"<br/><span class='ds'>"+s+"</span>").click(function(){$("#"+a+" .tsd").toggle(200)}),$.each(e,function(e,t){$("#"+a+" .isin").append("<tr><td>"+rms(t.status)+"</td><td>"+t.kab+"</td><td>"+alm(t.alamat)+t.kec+"</td><td>"+sex(t.sex)+"</td><td>"+t.umur+"</td><td>"+t.tgg+"</td></tr>")})}}).done(function(){$("#"+a+" table").DataTable({paging:!1,dom:'<"top"fi>'}),"pos"==a&&$("#anu").hide()})})});
