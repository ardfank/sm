function epo(a){const b=new Date(a),c=new Intl.DateTimeFormat("id",{year:"numeric"}).format(b),d=new Intl.DateTimeFormat("id",{month:"short"}).format(b),e=new Intl.DateTimeFormat("id",{day:"2-digit"}).format(b);return e+" "+d+" "+c}function cdt(a){var b=a.split("-");return new Date(b[0],b[1]-1,b[2])}function sex(a){return"Perempuan"==a?"&#128105;":"Laki-Laki"==a?"&#128104;":""}function alm(a){return"-"==a?"":a+", "}function rms(a){return a.substring(a.indexOf("-")+1)}function rm(a){return"odp"==a?"ODP - Selesai Pengawasan":"odp1"==a?"ODP - Proses Pengawasan":"pdp"==a?"PDP - Sehat":"pdp1"==a?"PDP - Dirawat PDP":"pdp2"==a?"PDP - PDP Meninggal":"pos"==a?"Positif - Dirawat Pasien Positif":"pos1"==a?"Positif - Meninggal":"Positif - Sembuh"}$(document).ready(function(){function a(a){var d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[];$.each(b[0][a],function(c,a){d.push({x:cdt(c),y:a.sodp}),e.push({x:cdt(c),y:a.podp}),f.push({x:cdt(c),y:a.spdp}),g.push({x:cdt(c),y:a.dpdp}),h.push({x:cdt(c),y:a.mpdp}),i.push({x:cdt(c),y:a.spos}),j.push({x:cdt(c),y:a.mpos}),k.push({x:cdt(c),y:a.ppos})}),c.options.data[7].dataPoints=d,c.options.data[6].dataPoints=e,c.options.data[4].dataPoints=f,c.options.data[3].dataPoints=g,c.options.data[5].dataPoints=h,c.options.data[1].dataPoints=i,c.options.data[2].dataPoints=j,c.options.data[0].dataPoints=k,c.render()}$("#anu").show();var b=[];$.ajax({url:"https://cdn.software-mirrors.com/covid/kab.json",jsonpCallback:"kab",dataType:"jsonp",success:function(a){b.push(a),$.each(a,function(b){$("#kabss").append("<option value='"+b+"'>"+b+"</option>")})}}).done(function(){a("Total"),$("#kabss").val("Total"),$("#kabss").change(function(){var b=$(this).val();a(b),"Total"===b?(b="",$(".tsd").hide()):$(".tsd").hide().show(),$("#pos table").dataTable().fnFilter(b),$("#odp table").dataTable().fnFilter(b),$("#pdp table").dataTable().fnFilter(b)})});var c=new CanvasJS.Chart("chart",{axisX:{valueFormatString:"DD-MMM",crosshair:{enabled:!0}},axisY:[{title:"Positif",labelFontSize:12,gridDashType:"longDashDotDot"},{title:"PDP",labelFontSize:12}],axisY2:{title:"ODP",labelFontSize:12},toolTip:{shared:!0},legend:{cursor:"pointer",itemclick:function(a){a.dataSeries.visible=!("undefined"==typeof a.dataSeries.visible||a.dataSeries.visible),a.chart.render()},fontSize:14,verticalAlign:"top"},data:[{type:"spline",name:"Positif - Dirawat",showInLegend:!0,xValueType:"dateTime",lineThickness:3,dataPoints:[]},{type:"spline",name:"Positif - Sembuh",showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"Positif - Meninggal",showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Dirawat",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Sehat",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"PDP - Meninggal",axisYIndex:1,showInLegend:!0,lineThickness:3,xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"ODP - Proses",showInLegend:!0,lineThickness:3,axisYType:"secondary",xValueType:"dateTime",dataPoints:[]},{type:"spline",name:"ODP - Selesai",showInLegend:!0,lineThickness:3,axisYType:"secondary",xValueType:"dateTime",dataPoints:[]}]});c.render();$.each(["odp","pdp","pos"],function(a,c){$.ajax({url:"https://cdn.software-mirrors.com/covid/"+c+".json",jsonpCallback:c,dataType:"jsonp",success:function(a){var b=a.filter(a=>a.status===rm(c)).length,d=a.filter(a=>a.status===rm(c+"1")).length,e=a.filter(a=>a.status===rm(c+"2")).length,f="odp"==c?"(Proses Pengawasan: "+d+" | Selesai Pengawasan: "+b+")":"pdp"==c?"(Dirawat: "+d+" | Sehat: "+b+" | Meninggal: "+e+")":"(Dirawat: "+b+" | Sembuh: "+e+" | Meninggal: "+d+")";$("#"+c+" h2").append(Object.keys(a).length+"<br/><span class='ds'>"+f+"</span>").click(function(){$("#"+c+" .tsd").toggle(200)}),$.each(a,function(d,a){$("#"+c+" .isin").append("<tr><td>"+rms(a.status)+"</td><td>"+a.kab+"</td><td>"+alm(a.alamat)+""+a.kec+"</td><td>"+sex(a.sex)+"</td><td>"+a.umur+"</td><td>"+a.tgg+"</td></tr>")})}}).done(function(){$("#"+c+" table").DataTable({paging:!1,dom:"<\"top\"fi>"}),"pos"==c&&$("#anu").hide()})})});
